# alerta-web

Installs the Alerta Web UI and dependent database in Kubernetes.

## Get Helm Repository Info

```console
helm repo add alerta-web https://hayk96.github.io/alerta-web
helm repo update
```

_See [`helm repo`](https://helm.sh/docs/helm/helm_repo/) for command documentation._

## Install Helm Chart

```console
helm install [RELEASE_NAME] alerta-web/alerta-web
```

_See [helm install](https://helm.sh/docs/helm/helm_install/) for command documentation._

## Dependencies

By default this chart installs additional, dependent chart:

- [bitnami/postgresql](https://github.com/bitnami/charts/tree/master/bitnami/postgresql)

_See [helm dependency](https://helm.sh/docs/helm/helm_dependency/) for command documentation._

## Uninstall Helm Chart

```console
helm uninstall [RELEASE_NAME]
```

This removes all the Kubernetes components associated with the chart and deletes the release.

_See [helm uninstall](https://helm.sh/docs/helm/helm_uninstall/) for command documentation._

## Upgrading Chart

```console
helm upgrade [RELEASE_NAME] alerta-web/alerta-web
```

## Values

| Key                                        | Type   | Default                                                                                                                                                                                                                                                        | Description                                                                            |
|--------------------------------------------|--------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
| nameOverride                               | str    | `""`                                                                                                                                                                                                                                                           | String to partially override alerta.fullname template (will maintain the release name) | 
| fullnameOverride                           | str    | `""`                                                                                                                                                                                                                                                           | String to fully override alerta.fullname template                                      |
| replicaCount                               | int    | `1`                                                                                                                                                                                                                                                            |                                                                                        |
| image.repository                           | str    | `"hayk96/alerta-web"`                                                                                                                                                                                                                                          |                                                                                        |
| image.tag                                  | str    | `"9.0.1"`                                                                                                                                                                                                                                                      |                                                                                        |
| image.pullPolicy                           | str    | `"IfNotPresent"`                                                                                                                                                                                                                                               |                                                                                        |
| service.service                            | str    | `"ClusterIP"`                                                                                                                                                                                                                                                  |                                                                                        |
| service.port                               | int    | `80`                                                                                                                                                                                                                                                           |                                                                                        |
| ingress.enabled                            | bool   | `false`                                                                                                                                                                                                                                                        |                                                                                        |
| ingress.annotations                        | object | `{}`                                                                                                                                                                                                                                                           |                                                                                        |
| ingress.path                               | str    | `"/"`                                                                                                                                                                                                                                                          |                                                                                        |
| ingress.hosts                              | list   | `"alerta.example.com"`                                                                                                                                                                                                                                         |                                                                                        |
| ingress.tls                                | list   | `[]`                                                                                                                                                                                                                                                           |                                                                                        |
| affinity                                   | map    | `{}`                                                                                                                                                                                                                                                           | Affinity settings for pod assignment                                                   |
| nodeSelector                               | map    | `{}`                                                                                                                                                                                                                                                           | Node labels for Alerta pod assignment                                                  |
| tolerations                                | list   | `[]`                                                                                                                                                                                                                                                           | Node tolerations for scheduling to nodes with taints                                   |
| resources.limits.cpu                       | str    | `"200m"`                                                                                                                                                                                                                                                       |                                                                                        |
| resources.limits.memory                    | str    | `"1Gi"`                                                                                                                                                                                                                                                        |                                                                                        |
| resources.requests.cpu                     | str    | `"100m"`                                                                                                                                                                                                                                                       |                                                                                        |
| resources.requests.memory                  | str    | `"128Mi"`                                                                                                                                                                                                                                                      |                                                                                        |
| alertaAdminPassword                        | str    | `"ALERTA_ADMIN_PASSWORD"`                                                                                                                                                                                                                                      |                                                                                        |
| alertaAdminUsers                           | list   | `"admin"`                                                                                                                                                                                                                                                      | The list of the admin users                                                            |
| alertaAdminKey                             | str    | `"ALERTA_ADMIN_KEY"`                                                                                                                                                                                                                                           |                                                                                        |
| alertaApiKey                               | str    | `"alertaApiKey"`                                                                                                                                                                                                                                               |                                                                                        |
| alertaInstallPlugins                       | list   | `["prometheus", "normalise", "enhance"]`                                                                                                                                                                                                                       |                                                                                        |
| alertaConfig.DEBUG                         | str    | `"False"`                                                                                                                                                                                                                                                      | Debug mode for increased logging                                                       |
| alertaConfig.AUTH_REQUIRED                 | str    | `"True"`                                                                                                                                                                                                                                                       | Users must authenticate when using web UI or command-line tool                         |
| alertaConfig.SIGNUP_ENABLED                | str    | `"False"`                                                                                                                                                                                                                                                      | Prevent self-service sign-up of new users via the web UI                               |
| alertaConfig.DELETE_EXPIRED_AFTER          | int    | `60`                                                                                                                                                                                                                                                           | Time period before deleting expired alerts                                             |
| alertaConfig.DELETE_INFO_AFTER             | int    | `60`                                                                                                                                                                                                                                                           | Time period before deleting informational alerts                                       |
| alertaConfig.COLUMNS                       | str    | `"['severity', 'status', 'lastReceiveTime', 'environment', 'service', 'resource', 'event', 'value', 'text']"`                                                                                                                                                  | User defined columns and column order for alert list view                              |
| alertaConfig.ACTIONS                       | str    | `"['createIssue', 'updateIssue']"`                                                                                                                                                                                                                             | Adds buttons to web console for operators to trigger custom actions against alert      |
| alertaConfig.PLUGINS                       | str    | `"['prometheus', 'normalise', 'enhance']"`                                                                                                                                                                                                                     | List of enabled plugins                                                                |
| alertaConfig.ALERTMANAGER_API_URL          | str    | `'"http://prometheus-alertmanager.svc"'`                                                                                                                                                                                                                       |                                                                                        |
| alertaConfig.ALERTMANAGER_SILENCE_FROM_ACK | str    | `"True"`                                                                                                                                                                                                                                                       |                                                                                        |
| alertaConfig.LOG_HANDLERS                  | str    | `"['console']"`                                                                                                                                                                                                                                                | List of log handlers eg. console, file, wsgi                                           |
| alertaConfig.COLOR_MAP                     | str    | `"{'severity': {'security': '#000000', 'critical': 'red', 'major' : '#F89407', 'minor' : '#f8bc07', 'warning': '#1E90FF', 'indeterminate': '#a32cf2', 'informational': 'green', 'ok': '#00CC00', 'normal': '#0aab78', 'unknown': 'silver'}, 'text': 'white'}"` | Dictionary of severity colors, text and highlight color                                |
| alertaWebUIConfig                          | str    | `""`                                                                                                                                                                                                                                                           | Configures Alerta web UI (It uses simple JSON syntax)                                  |  
| postgresql.enabled                         | bool   | `true`                                                                                                                                                                                                                                                         | Enable PgSQL as backend database                                                       |
| postgresql.auth.database                   | str    | `"alerta"`                                                                                                                                                                                                                                                     |                                                                                        |
| postgresql.auth.username                   | str    | `"alerta"`                                                                                                                                                                                                                                                     |                                                                                        |
| postgresql.auth.password                   | str    | `"PG_ALERTA_PASSWORD"`                                                                                                                                                                                                                                         |                                                                                        |
| postgresql.primary.persistence.enabled     | bool   | `true`                                                                                                                                                                                                                                                         |                                                                                        |
| postgresql.primary.persistence.size        | str    | `"1Gi"`                                                                                                                                                                                                                                                        |                                                                                        |
| useExistingDatabase.type                   | str    | `"postgresql"`                                                                                                                                                                                                                                                 | Type of the database. Currently only Postgresql supported                              |
| useExistingDatabase.endpoint               | str    | `"example-postgresql.default.svc:5432"`                                                                                                                                                                                                                        | The address and port of the database                                                   |
| useExistingDatabase.database               | str    | `"EXISTING_DATABASE_NAME"`                                                                                                                                                                                                                                     | Name of the existing database                                                          |
| useExistingDatabase.auth.enabled           | bool   | `true`                                                                                                                                                                                                                                                         | Use basic auth to connect with database                                                |
| useExistingDatabase.auth.username          | str    | `"EXISTING_USERNAME"`                                                                                                                                                                                                                                          | Username of the existing database                                                      |
| useExistingDatabase.auth.password          | str    | `"EXISTING_PASSWORD"`                                                                                                                                                                                                                                          | Password of the existing database                                                      |
